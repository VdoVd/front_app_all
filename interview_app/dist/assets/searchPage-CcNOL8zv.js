/* empty css               *//* empty css                *//* empty css                 */import{d as D,r,a as E,H as A,o as p,p as v,b as C,x as S,F as $,q as B,y as N,e,w as n,g as j,u,i as q,v as z,f as y,L as F,D as b,t as M,n as R,m as U,k as W,j as H,M as J}from"./index-U8SeVnrU.js";import{u as O}from"./homeListIds-D_23J0N0.js";import{u as P,a as G}from"./userStore-CWKKMDdA.js";import{_ as K}from"./homeItemView.vue_vue_type_script_setup_true_lang-CFFbt54G.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X=D("search",()=>{const d=r([]);function o(){d.value=[]}function i(l){d.value.push(l)}function a(){d.value.length!=0&&d.value.pop()}return{searchArr:d,clear:o,add:i,pop:a}},{persist:!0}),Y={key:1,class:"home-list-view",ref:"containerRef"},Z=E({__name:"searchListView",props:["sort"],setup(d){const o=r([]),i=r(""),a=d;A(a.sort,()=>{console.log("sort",a.sort),i.value=a.sort,l.value=!0,h()}),a.sort===void 0?i.value="vue":i.value=a.sort;const l=r(!0),m=O(),w=P();let f=r(1);const h=()=>{G.get(`https://api-harmony-teach.itheima.net/hm/question/list?questionBankType=10&sort=${i.value}`,{headers:{Authorization:`Bearer ${w.userLogin.token}`}}).then(s=>{o.value=s.data.data.rows,l.value=!1,m.ids=o.value.map(t=>parseInt(t.id)),console.log(`list  ids:${JSON.stringify(m.ids)}`)})};h();let g=0,c=()=>{console.log("loadMore"),f.value++,console.log(`times:${g++}`),g>6&&(l.value=!0,h(),g=0)};function V(s=2e3){let t=null;return console.log(`times:${t}`),t!=null&&clearTimeout(t),function(){t=window.setTimeout(()=>{c(),t=null},s)}}return window.onscroll=V(2e3),(s,t)=>{const _=N;return p(),v($,null,[l.value===!0?(p(),C(_,{key:0,description:"加载中..."})):S("",!0),l.value===!1?(p(),v("div",Y,[(p(!0),v($,null,B(o.value,k=>(p(),C(K,{item:k},null,8,["item"]))),256))],512)):S("",!0)],64)}}}),ee=Q(Z,[["__scopeId","data-v-a56f5a1e"]]),te={class:"search-wrap"},oe={class:"record"},se={class:"item"},fe=E({__name:"searchPage",setup(d){const o=r(""),i=r(!1),a=r(0);let l=r(!0);const m=r("");let w=()=>{R.back()};const f=X();A(o,()=>{m.value=o.value,l.value=!0,setTimeout(()=>{l.value=!1},1e3)});let h=()=>{i.value===!0?(m.value="",o.value=""):(f.add(o.value),m.value=o.value,console.log(`arr:${f.searchArr}`),o.value=""),i.value=!1},g=()=>{f.clear()},c=r(24);return(V,s)=>{const t=U,_=q,k=W,I=H,L=z("Delete"),T=J;return p(),v("div",te,[e(_,null,{default:n(()=>[e(t,{span:2,onClick:u(w),style:{"font-weight":"bolder","font-size":"17px"}},{default:n(()=>[y("<")]),_:1},8,["onClick"]),e(t,{span:20,style:{"font-weight":"bolder","font-size":"18px","text-align":"center"}},{default:n(()=>[y("刷个面试题")]),_:1})]),_:1}),e(_,{style:{height:"20px"}}),e(_,{justify:"center"},{default:n(()=>[e(t,{span:u(c)},{default:n(()=>[e(k,{class:"input",modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=x=>o.value=x),style:{width:"90%","border-radius":"15px"},placeholder:"请输入关键词","prefix-icon":u(F),onFocus:s[1]||(s[1]=x=>{a.value=4,b(c)?c.value=20:c=20}),onChange:s[2]||(s[2]=()=>{console.log(`load:${u(l)}`),a.value=4,u(h)()})},null,8,["modelValue","prefix-icon"])]),_:1},8,["span"]),e(t,{span:a.value,onClick:()=>{}},{default:n(()=>[e(I,{onClick:s[3]||(s[3]=()=>{u(f).pop(),console.log(`pop:${u(f).searchArr}`),b(c)?c.value=24:c=24,a.value=0})},{default:n(()=>[y(" 取消 ")]),_:1})]),_:1},8,["span"])]),_:1}),e(_,{style:{height:"7px"}}),e(_,{justify:"space-between",align:"middle"},{default:n(()=>[e(t,{span:7,offset:1,style:{"font-weight":"bolder","font-size":"20px"}},{default:n(()=>[y("搜索记录")]),_:1}),e(t,{span:3,style:{height:"20px"}},{default:n(()=>[e(T,{onClick:u(g)},{default:n(()=>[e(L)]),_:1},8,["onClick"])]),_:1})]),_:1}),j("div",oe,[(p(!0),v($,null,B(u(f).searchArr,(x,ae)=>(p(),v("p",se,M(x),1))),256))]),e(_,{style:{height:"7px"}}),u(l)===!1?(p(),C(ee,{key:0,sort:m.value},null,8,["sort"])):S("",!0)])}}});export{fe as default};
